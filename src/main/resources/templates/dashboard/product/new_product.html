<div class="layui-body">
    <form class="layui-form" id="product" style="padding: 15px" enctype="multipart/form-data">
        <fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px">
            <legend>创建产品信息</legend>
        </fieldset>
        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label">产品名称</label>
                <div class="layui-input-inline">
                    <input type="text" name="name" autocomplete="off" class="layui-input">
                </div>
            </div>

            <div class="layui-inline">
                <label class="layui-form-label">产品种类</label>
                <div class="layui-input-inline">
                    <input type="text" name="category"   autocomplete="off" class="layui-input">
                </div>
            </div>

        </div>


        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label">产品价格</label>
                <div class="layui-input-inline">
                    <input type="text"   name="price" autocomplete="off" class="layui-input" >
                </div>
            </div>

            <div class="layui-inline">
                <label class="layui-form-label">产品数量</label>
                <div class="layui-input-inline">
                    <input type="text" name="count" autocomplete="off" class="layui-input">
                </div>
            </div>
        </div>


        <div class="layui-form-item layui-form-text">
        <label class="layui-form-label">产品介绍</label>
        <div class="layui-input-block">
            <textarea name="detail" placeholder="请输入内容" class="layui-textarea"></textarea>
        </div>
      </div>

        <div class="layui-form-item layui-form-text">
            <label class="layui-form-label">产品信息</label>
            <div class="layui-input-block">
                <textarea name="info" placeholder="请输入内容" class="layui-textarea"></textarea>
            </div>
        </div>

        <!--<div class="layui-form-item">-->
        <!--<div class="layui-form-item layui-upload">-->
        <!--<label class="layui-form-label">产品图片</label>-->
        <!--<div class="layui-upload-drag" id="upload" lay-data="{url:'/dashboard/upload'}">-->
        <!--<i class="layui-icon"></i>-->
        <!--<p>点击上传，或将文件拖拽到此处</p>-->
        <!--</div>-->
        <!--</div>-->
        <!--</div>-->

        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label">产品图片</label>
                <div class="layui-input-inline">
                    <input type="file" name="image" class="layui-input">
                </div>

            </div>
        </div>



        <div class="layui-form-item">
            <div class="layui-input-block">
                <button id="btn-submit" class="layui-btn">立即提交</button>
                <button type="reset" class="layui-btn layui-btn-primary">重置</button>
            </div>
        </div>
    </form>

</div>

<script>

    //============= submit form ===============
    function submitFrom() {

        $(document).ready(function () {

            $("#btn-submit").click(function (event) {
                console.log("click...")
                //stop submit the form, we will post it manually.
                event.preventDefault();

                fire_ajax_submit();

            });

        });
    }

    function fire_ajax_submit() {

        // Get form
        var form = $('#product')[0];
        console.log(form)
        var data = new FormData(form);
        console.log(data)

        $.ajax({
            type: "POST",
            enctype: 'multipart/form-data',
            url: "dashboard/products",
            data: data,
            processData: false,
            contentType: false,
            cache: false,
            timeout: 600000,
            success: function (data) {
                //$("#result").text(data);
                console.log("SUCCESS : ", data);
                $("#btn-submit").prop("disabled", false);

            },
            error: function (e) {

                //$("#result").text(e.responseText);
                console.log("ERROR : ", e);
                $("#btn-submit").prop("disabled", false);

            }
        });

    }
</script>


